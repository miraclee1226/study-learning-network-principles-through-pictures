# Ch.3 네트워크의 공통 언어 TCP/IP

## 3-1 TCP/IP

- 프로토콜: PC와 스마트폰 등이 통신하는 규칙
- 네트워크 아키텍쳐: 복수의 프로토콜을 조합한 것. 지금은 거의 TCP/IP만 이용함
- 호스트: TCP/IP로 통신하는 PC와 스마트폰, 각종 네트워크 기기 전반

### TCP/IP의 계층구조

- 애플리케이션층 (HTTP, SMTP, POP3, IMAP4, DHCP, DNS 등)
- 트랜스포트층 (TCP/UDP)
- 인터넷층 (IP, ICMP, ARP)
- 네트워크 인터페이스층 (이더넷, 무선 LAN(Wi-Fi), PPP 등

각 계층에 포함된 프로토콜을 조합해 애플리케이션이 통신한다.

## 3-2 네트워크 인터페이스층과 인터넷층

- **네트워크 인터페이스층**: 같은 네트워크 안에서 데이터를 전송하는 것
- 인터넷층: 한 네트워크에 모든 기기가 연결되는 것은 아님. 많은 네트워크가 존재하고, 거기에 다양한 기기가 연결됨. 인터넷층은 그 네트워크 사이에서 데이터를 전송하는 역할을 함
- 엔드투엔드 통신: 원격지 네트워크에서 최종적인 출발지와 목적지 사이의 데이터 전송

## 3-3 트랜스포트층과 애플리케이션층

- **트랜스포트층**: 데이터를 적절한 애플리케이션에 배분함. TCP에는 엔드투엔드의 신뢰성을 확보해주는 기능이 있음
- **애플리케이션층**: 애플리케이션의 기능을 실행하기 위한 데이터의 형식과 처리 절차 등을 결정하는 것. 단순한 0과 1이 아니라 문자와 이미지 등 인간이 인식할 수 있도록 데이터를 표현함

## 3-4 캡슐화

- 헤더: 각 프로토콜의 처리를 하기 위한 제어 정보
- 캡슐화: 데이터에 헤더를 추가하는 것
- 역캡슐화: 추가된 데이터를 보고 프로토콜의 처리를 하고, 헤더를 제거해 다른 프로토콜에 처리를 넘기는 것
- 데이터 송신측은 TCP/IP 계층을 위에서부터 아래로 따라가며 각 프로토콜 헤더를 추가한다.

## 3-5 TCP/IP를 이용한 통신

네트워크 기기는 물리적인 신호를 0과 1로 변환해서 각각의 동작을 위한 헤더를 참조해서 데이터를 전송한다.

데이터를 수신하는 쪽은 TCP/IP 계층을 아래에서 위로 따라가며 헤더를 참조해 프로토콜을 처리한다.

## 3-6 메세지, 세그먼트, 패킷, 프레임

- 애플리케이션층: 메시지
- 트랜스포트층: 세그먼트 또는 데이터그램
- 인터넷층: 패킷 또는 데이터그램
- 네트워크 인터페이스 층: 프레임

부르는 방법에 차이가 있으므로 네트워크 통신을 생각할 때 어는 계층을 주목하는지 명확해진다.

## 3-7 IP, IP 패킷, 라우팅

- IP의 역할은 엔드투엔드 통신을 하는 것. 즉 네트워크 상의 어떤 PC에서 다른 PC 등으로 데이터를 전송하는 것이 역할임.
- 보내고 싶은 데이터에 IP 헤더를 추가해 IP 패킷으로 만듦.
- IP 헤더에서 가장 중요한 것은 IP 주소임. 데이터의 출발지와 목적지를 나타내기 때문

목적지가 다른 네트워크에 접속된 경우는 중간에 라우터가 존재함. 라우터가 IP 패킷을 전송하는 것을 가리켜 라우팅이라고 함

## 3-8 IP 주소

- IP 주소로 TCP/IP를 사용해 통신할 상대방을 지정한다.
- TCP/IP 통신에서는 반드시 IP 주소를 지정해야만 한다.
- IP 주소 표기는 8비트씩 4개로 0~256 사이의 10진수로 변환하고 ‘.’으로 구분한다.

## 3-9 유니캐스트, 브로드캐스트, 멀티캐스트

- 유니캐스트: 단 하나의 목적지에 데이터를 전송하는 것
- 브로드캐스트: 같은 네트워크 상의 모든 호스트에 데이터를 전송하는 것
- 멀티캐스트: 특정 그룹에 포함되는 호스트에 데이터를 전송하는 것

## 3-10 유니캐스트 IP 주소

- 유니캐스트 IP 주소는 전반의 네트워크부와 후반의 호스트부로 구성된다. TCP/IP 통신의 대부분은 유니캐스트이다.
- 255.255.255.255는 브로드캐스트 IP 주소다.
- 224.0.0.0 ~ 239.255.255.255는 멀티캐스트 IP 주소다.

## 3-11 서브넷 마스크

네트워크부와 호스트부의 구분은 고정된 게 아니라 가변적임

32비트 IP 주소의 어디까지가 네트워크부인지 명시한 것이 **서브넷 마스크**임

- 서브넷 마스크로 IP 주소의 네트워크부와 호스트부를 구분한다.
- 서브넷 마스크는 32비트로 비트 1이 네트워크부, 비트 0이 호스트부를 나타낸다
- 서브넷 마스크 표기는 IP 주소처럼 8비트씩 10진수로 변환하고 ‘.’으로 구분한다.
- 서브넷 마스크 표기에는 ‘/’ 뒤에 연속한 비트 1의 개수로 표기하는 프리픽스 표기도 있다.
